'use strict';
const config = require(`../config.json`);
const makeCleanInput = theMsg => {
  const bannedChars = [
    `||`,
    `-`,
    `*`,
    `-`,
    `<>`,
    `<`,
    `>`,
    `,`,
    `=`,
    `<=`,
    `>=`,
    `~=`,
    `!=`,
    `^=`,
    `(`,
    `)`,
    `@`,
    `!`,
    `/`,
    `#`,
    `.`,
  ];

  const bannedArr = [
    'use',
    'show',
    'auth',
    'drop',
    'update',
    'delete',
    'get',
    'hello',
    'find',
    'from',
    'create',
    'rename',
    'db',
    'insert',
    'set',
    'stats',
  ];
  let cleanMsg = theMsg;
  bannedArr.forEach(entry => {
    const reg = new RegExp(`${entry}`, 'g');
    cleanMsg = cleanMsg.replace(reg, '');
  });
  const cleanRemove = cleanMsg
    .split('')
    .map(entry => {
      if (bannedChars.includes(entry)) {
        return '';
      } else {
        return entry;
      }
    })
    .join('');
  return cleanRemove;
};

const getCommandPath = () => {
  let comPath = '';
  if (config.testing.usedev) {
    comPath = 'testing';
  } else {
    comPath = 'commands';
  }
  return comPath;
};

const getToken = () => {
  let theToken = null;
  if (config.testing.usedev) {
    theToken = config.tokens.dev;
  } else {
    theToken = config.tokens.prod;
  }
  return theToken;
};

exports.makeCleanInput = makeCleanInput;
exports.getToken = getToken;
exports.getCommandPath = getCommandPath;
